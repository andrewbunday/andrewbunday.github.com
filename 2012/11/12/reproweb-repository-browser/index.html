<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Andrew Bunday ReproWeb - A micro repository browser</title>    

    <script type="text/javascript" src="/assets/js/jquery.js"></script>
    <script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.stellar.min.js"></script>
    <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
    <script type="text/javascript" src="/photo/css_browser_selector.js"></script>

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"/>
    <link rel="stylesheet" type="text/css" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" media="screen" />  

    <link rel="alternate" type="application/rss+xml" title="RSS Feed for andrewbunday.co.uk" href="/rss.xml" />

    <link rel="stylesheet" type="text/css" href="/photo/boostrap.css"/>
    <link rel="stylesheet" type="text/css" href="/photo/photo.css"/>

</head>

    <body>

        <script type="text/javascript">
            $(window).stellar();

            $(document).ready(function () {
                // scale the banner to fit the window
                $('.photo').css({ "height": $(window).innerHeight() - 50,
                                  "background-image": "url(http://farm4.staticflickr.com/3461/3947835362_305ed69eee_o.jpg)" 
                                });
                $('.photo-navbar').css({ "background-image": "url(http://farm4.staticflickr.com/3461/3947835362_305ed69eee_o.jpg)" });
                $('.footer').css({ "background-image": "url(http://farm4.staticflickr.com/3461/3947835362_305ed69eee_o.jpg)" });
            });

            $(document).ready(function () {
                // highlight the current pange
                $('a[href="' + this.location.pathname + '"]').addClass('activePage');
            });

            $(document).ready(function() {
                $(".fancybox").fancybox({
                                          helpers : {
                                            title: {
                                              type: 'outside'
                                            },
                                            overlay : {
                                              css : {
                                                'background' : 'rgba(46,46,46,0.8)',
                                              },
                                            },
                                          },
                                          padding: 0,
                                          closeBtn: false,
                                          arrows: false,
                                          nextClick: true,
                                          openEffect: 'elastic',
                                          openSpeed: 500
                                        });
            });
        </script>

        <div class="navbar transparent navbar-static-top photo-navbar">
            <div class="navbar-inner transparent main-navbar-inner">
                <div class="pull-right">
                    <ul class="nav transparent">
                        <!-- <li><a href="/new/">New</a></li> -->
                        <li><a href="/">Home</a></li>
                        <li><a href="/about/">About</a></li>
                        <li><a href="/posts/">Posts</a></li>
                        <li><a href="https://github.com/andrewbunday" target="_blank">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/andrewbunday" target="_blank">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid main-content">

            <div class="row-fluid" style="margin-top:-20px;">
                <div id="photo-banner" class="container photo" data-stellar-background-ratio="0.5" style="padding-top: 80px">

                    <div class="container">
                        <div class="row-fluid">
                            <div class="span6">Reproweb</div>
                        </div>
                        <div class="row-fluid">
                            <div class="span6">Python, Flask and Apt</div>
                        </div>
                        <div class="row-fluid">
                            <div class="span6">---</div>
                        </div>
                        <div class="row-fluid">
                            <div class="span6">A repository browser for reprepo</div>
                        </div>
                    </div>  

                </div>

                <div class="container" style="padding-top:20px">
                    <h1>ReproWeb - A micro repository browser</h1>
                    <div class="row-fluid" style="margin-bottom:10px">
                        <div class="span8">
                            <p class="muted">Mon 12 Nov 2012</p>
                        </div>
                    </div>
                    <h3 class="no_toc" id="contents">Contents</h3>

<hr />

<ul class="nav nav-list well" id="markdown-toc">
  <li><a href="#overview">Overview</a></li>
  <li><a href="#current-feature-set">Current Feature Set</a>    <ul>
      <li><a href="#browsing">Browsing</a></li>
      <li><a href="#searching">Searching</a></li>
    </ul>
  </li>
  <li><a href="#future-ideas">Future Ideas</a></li>
  <li><a href="#get-hold-of-it-yourself">Get hold of it yourself</a></li>
  <li><a href="#technical-details">Technical Details</a></li>
</ul>

<h2 id="overview">Overview</h2>

<hr />

<p>A few weeks ago we finished a first draft release of <a href="http://github.com/andrewbunday/reproweb">ReproWeb</a>, a small, light weight apt repository browser. The browser was build out of an increasing need we were finding, to be able to introspect into our main production repository.</p>

<p>Over the course of 1.5 years that repository has grown to the point when the main stable channel contains around 334 individual packages whilst the unstable channel contains a further 149.</p>

<p>Without running apt-cache commands, and munging with our software source lists it was becoming difficult to not only find the name/version of a piece of software, but it was also becoming hard to tell:</p>

<ul>
  <li>When the package was created</li>
  <li>Who created the package</li>
  <li>If the package had a newer version in the unstable channel</li>
  <li>If the package was available in the stable channel</li>
  <li>If the package had been published for all of our supported distributions.</li>
</ul>

<p>Almost all of these tasks can be carried out from a terminal using commands such as <code>apt-get show</code>, but the web interface allows for far quicker navigation, comparison and has already started us asking more questions as our understanding of the data in our repository grows.</p>

<h2 id="current-feature-set">Current Feature Set</h2>

<hr />

<p>At present Reproweb allows a user to perform filters on the content of a repository based on either;</p>

<ul>
  <li>simple string pattern matching against either the package name, version string or codename/component/architecture,</li>
  <li>or by browsing through the hierarchy of the repository from:</li>
</ul>

<blockquote>
  <p>codename -&gt; component -&gt; architecture -&gt; package -&gt; version</p>
</blockquote>

<h3 id="browsing">Browsing</h3>
<hr />

<blockquote>
  <p>Do you find yourself wanting to know more about your repository? Perhaps how many packages are in a particular component? or perhaps you don’t know the structure of your repository and you want to get to know it more intimately?</p>
</blockquote>

<p>These screenshots show:</p>

<ul>
  <li>The root of the repository, listing the currently defined distributions.
Metadata associated with the distribution is also listed along with information such as the components available within the distribtuion and the total number of packages currently published within it.</li>
</ul>

<p><img src="https://github.com/andrewbunday/ReproWeb/raw/master/documentation/images/image_07.png" alt="" /></p>

<ul>
  <li>The breadcrumb which is left at the top of the interface as you delve deeper into the repository.</li>
</ul>

<p><img src="https://github.com/andrewbunday/ReproWeb/raw/master/documentation/images/image_08.png" alt="" /></p>

<h3 id="searching">Searching</h3>
<hr />

<blockquote>
  <p>Do you have a specific package you are looking for? Do you know it’s name or version and don’t want to have to go browsing around for it?</p>
</blockquote>

<p>The package list shows all of the packages currently available for a given architecture or all of the packages across all of the distributions in the repository. The search box can be used to search through these packages, as you type it will filter out those packages which don’t match.</p>

<p><img src="https://github.com/andrewbunday/ReproWeb/raw/master/documentation/images/image_05.png" alt="" /></p>

<h2 id="future-ideas">Future Ideas</h2>
<hr />

<p>This is a list of the features which I’d like to add in time.</p>

<ol>
  <li>Make the package view accessable at an point in the browser, so for example
allow listing of packages in a component.</li>
  <li>Complete json endpoints for all urls.</li>
  <li>Renaming or package or version number.</li>
  <li>Listing of unreferrenced versions. Or previous versions which are no longer
available in Releases.gz</li>
  <li>Listing of pre/post install/remove scripts.</li>
</ol>

<h2 id="get-hold-of-it-yourself">Get hold of it yourself</h2>
<hr />

<p>I strongly recommending visiting <a href="http://github.com/andrewbunday/reproweb">http://github.com/andrewbunday/reproweb</a> and start by reading the README and documentation on the repo.</p>

<p>Or for the impatient in life:</p>

<div class="highlight"><pre><code class="bash"><span class="lineno"> 1</span> <span class="c"># clone the repository</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> git clone https://github.com/andrewbunday/ReproWeb.git
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="c"># ensure that the cache directory has been created, or that you edit the setting in the configuration before you start up the app.</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> sudo mkdir /var/cache/reproweb
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="c"># start it up</span>
<span class="lineno">10</span> 
<span class="lineno">11</span> python debug-run.py
</code></pre></div>

<h2 id="technical-details">Technical Details</h2>

<hr />

<p>Underneath the hood ReproWeb is built using only a handful of <em>(at the time of writing)</em> actively developed tools.</p>

<p>Development of Reproweb was conciously kept to a tight a deadline. We gave ourselves less than 2 weeks to go from establishing our initial requirements, having looked at the alternatives, to the first releaseable draft.</p>

<p>This drove our decisions behind each of the components we used to build the application.</p>

<ul>
  <li>
    <p><strong>reprepro</strong> - This is the repository management tool which the browser has been designed to be used with. All of the interactions with reprepro are handled through via the 3rd party script reepocheep.py which could be swapped out with an equivalent script which provides the same api.</p>

    <p>Since we were using reprepro already to manage our software package repositories it made complete sense to tailor the app to its strengths.</p>

    <p>The majority of the heavy lifting for the app is handled by calls to reprepro via subprocess and then handling of the returned data.</p>
  </li>
  <li>
    <p><strong>flask</strong> - A small web application backend framework which handles all of the functionality we need for it for this project. Something as feature rich as django would have been more cumbersome that the project required. Other parts of the Flask eco system were utilised, such as jinja2 to handle dynamic page generation.</p>

    <p>This is one of my personally favourite frameworks to use when building these kinds of applications. Having worked previously with django and really having not gotten on well with it I’ve always been attracted to these lighter weight frameworks.</p>

    <p>Another choice a few years ago might have been <a href="http://webpy.org">web.py</a> which truely is a micro framework would have ended up being replaced as it reached its limits a little sooner than flask will.</p>
  </li>
  <li>
    <p><strong>bootstrap</strong> - A very user friendly web front-end framework which handles features such as responsive layout, navbar and general css styling consistency.</p>

    <p>A few years ago if someone had told me that all of the css and jquery plugins I would need to build a webpage/app quickly with little stress I could download and get started with in minutes, I would have laughed and said ‘your sooo funny’. However now Bootstrap does all those things and it has made the lives of non-web developers such as myself far easier.</p>
  </li>
  <li>
    <p><strong>datatables.js</strong> - A damn awesome jquery plugin which completely powers the tabulated, sortable, filterable, paginated list of packages seen in the search view.</p>

    <p>Does what it says on the tin. Credit goes to <a href="http://paulnendick.github.com">@PaulNendick</a> for the find.</p>
  </li>
</ul>

                </div>

            </div>

            <div class="container" style="padding-top:20px"> 
                <div style="padding: 20px 0 20px 0">
                    <div id="disqus_container" class="row-fluid">
    <div class="span12">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'dumbtechnotes'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</div>
                </div>
            </div>

            <div class="container footer" data-stellar-background-ratio="0.5">
    <div class="row-fluid">
        <div class="span12 rights-reserved" style="text-align: center">
            &copy; 2014. All rights reserved. All comments are my own and not those of my employer.
        </div>
    </div>
</div>

        </div>
     </body>
</html>
